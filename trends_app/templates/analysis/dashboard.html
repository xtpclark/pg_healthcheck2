{% extends "base.html" %}

{% block title %}Analysis Dashboard{% endblock %}

{% block content %}
<div class="mb-6">
    <h2 class="text-2xl font-bold text-slate-900">Analysis Dashboard</h2>
    <p class="text-slate-600 mt-1">Technology-specific analysis and insights</p>
</div>

{% if schemas %}
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {% for schema in schemas %}
    <div class="bg-white border border-slate-200 p-6 hover:shadow-md transition">
        <h3 class="text-lg font-semibold text-slate-900 mb-2">{{ schema.display_name }}</h3>

        {% if schema.schema_name == 'postgres_analysis' %}
        <p class="text-slate-600 text-sm mb-4">
            Identify high-frequency write workloads and Kafka/Cassandra migration opportunities
        </p>
        <div class="space-y-2">
            <a href="{{ url_for('main.postgres_migration_candidates') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Migration Candidates
            </a>
        </div>

        {% elif schema.schema_name == 'executive_analysis' %}
        <p class="text-slate-600 text-sm mb-4">
            Cross-technology insights, revenue opportunities, and customer technology footprint
        </p>
        <div class="space-y-2">
            <a href="{{ url_for('main.executive_migration_pipeline') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Migration Pipeline
            </a>
            <a href="{{ url_for('main.executive_customer_footprint') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Customer Technology Footprint
            </a>
        </div>

        {% elif schema.schema_name == 'kafka_analysis' %}
        <p class="text-slate-600 text-sm mb-4">
            Kafka capacity upgrade opportunities and cluster health
        </p>
        <div class="space-y-2">
            <a href="{{ url_for('main.kafka_capacity_upgrades') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Capacity Upgrade Candidates
            </a>
        </div>

        {% elif schema.schema_name == 'cassandra_analysis' %}
        <p class="text-slate-600 text-sm mb-4">
            Cassandra performance upgrade opportunities and cluster health
        </p>
        <div class="space-y-2">
            <a href="{{ url_for('main.cassandra_performance_upgrades') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Performance Upgrade Candidates
            </a>
        </div>

        {% elif schema.schema_name == 'opensearch_analysis' %}
        <p class="text-slate-600 text-sm mb-4">
            OpenSearch capacity upgrade opportunities and cluster health
        </p>
        <div class="space-y-2">
            <a href="{{ url_for('main.opensearch_capacity_upgrades') }}"
               class="block px-4 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 transition">
                → Capacity Upgrade Candidates
            </a>
        </div>

        {% endif %}
    </div>
    {% endfor %}
</div>
{% else %}
<div class="bg-amber-50 border border-amber-200 p-6">
    <p class="text-amber-800">
        <strong>No Analysis Schemas Available</strong><br>
        You don't have access to any analysis schemas. Contact your administrator to grant privileges like <code>ViewPostgreSQLAnalysis</code> or <code>ViewExecutiveAnalysis</code>.
    </p>
</div>
{% endif %}

<div class="mt-8 bg-slate-50 border border-slate-200 p-6">
    <h3 class="text-sm font-semibold text-slate-900 mb-2">About Analysis Schemas</h3>
    <p class="text-sm text-slate-600">
        Analysis schemas provide technology-specific insights based on health check findings. Access is controlled through privilege-based security, allowing you to grant different teams access to different analytics.
    </p>
</div>
{% endblock %}
